# JavaScript ä¸­çš„å˜é‡

JavaScript ä¸­ï¼Œå¯ä»¥å£°æ˜å˜é‡çš„å…³é”®å­—æœ‰`var`ã€`let`å’Œ`const`ã€‚

# var

ä½¿ç”¨ `var` å®šä¹‰å˜é‡ï¼Œå¯ä»¥ä¿å­˜ä»»ä½•ç±»å‹çš„å€¼ã€‚è‹¥ä¸åˆå§‹åŒ–å˜é‡ï¼Œå˜é‡ä¼šä¿å­˜ `undefined`ã€‚

## 1. å‡½æ•°çº§ä½œç”¨åŸŸ

ä½¿ç”¨ `var` å®šä¹‰çš„å˜é‡ä¼šæˆä¸ºåŒ…å«å®ƒçš„**å‡½æ•°**çš„å±€éƒ¨å˜é‡ã€‚

```javascript
function func() {
    var a = 'hi'; // å±€éƒ¨å˜é‡
}
func();
console.log(a);   // ReferenceError: a is not defined
```

å˜é‡ `a` åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨ `var` å®šä¹‰ï¼Œè°ƒç”¨å‡½æ•° `func`ï¼Œä¼šåˆ›å»ºè¿™ä¸ªå˜é‡å¹¶ç»™å®ƒèµ‹å€¼ã€‚å‡½æ•°æ‰§è¡Œç»“æŸåï¼Œå˜é‡å°±ä¼šè¢«é”€æ¯ï¼Œæ‰€ä»¥ä¸Šè¿°ä»£ç æœ€åä¸€è¡Œä¼šæŠ¥é”™ï¼Œæ˜¾ç¤ºå˜é‡ `a` æœªå®šä¹‰ã€‚

è‹¥åœ¨å‡½æ•°å†…éƒ¨ï¼Œä¸ä½¿ç”¨ `var` æ“ä½œç¬¦ï¼Œç›´æ¥ç»™å˜é‡ `a` èµ‹å€¼ï¼Œé‚£ä¹ˆ `a` å°±æˆä¸ºäº†å…¨å±€å˜é‡ï¼Œå¯ä»¥åœ¨å‡½æ•°å¤–éƒ¨è®¿é—®åˆ°ã€‚åœ¨æµè§ˆå™¨ç¯å¢ƒä¸‹ï¼Œ`a` æˆä¸º`window`å¯¹è±¡çš„å±æ€§ã€‚

```javascript
function func() {
    a = 'hi'; // å…¨å±€
}
func();
console.log(a); // hi
console.log(window.a); // hi
console.log(window.a === a); // true
```

## 2. å˜é‡æå‡

ä½¿ç”¨`var`å£°æ˜å˜é‡ï¼Œä¼šè‡ªåŠ¨æå‡åˆ°å‡½æ•°ä½œç”¨åŸŸé¡¶éƒ¨ï¼Œå¦‚ä¸‹ä»£ç ï¼š

```javascript
function func() {
    console.log(a);
    var a = 1;
}
func(); // undefined
```

ä»£ç æ²¡æœ‰æŠ¥é”™ï¼Œè¾“å‡ºäº†`undefined`ï¼Œè¿™æ˜¯å› ä¸º**å˜é‡çš„å£°æ˜**è¢«æå‡åˆ°äº†å‡½æ•°ä½œç”¨åŸŸé¡¶éƒ¨ï¼Œç­‰ä»·äºå¦‚ä¸‹ä»£ç ï¼š

```javascript
function func() {
    var a;
    console.log(a);
    a = 1;
}
func(); // undefined
```

## 3. é‡å¤å£°æ˜

å¦å¤–ï¼Œä½¿ç”¨ `var` é‡å¤å£°æ˜åŒä¸€ä¸ªå˜é‡ä¹Ÿå¯ä»¥ï¼š

```javascript
function func() {
    var a = 1;
    var a = 2;
    var a = 3;
    console.log(a);
}
func(); // 3
```

## 4. å…¨å±€å˜é‡æŒ‚è½½åˆ° window

æµè§ˆå™¨ç¯å¢ƒä¸­ï¼Œå…¨å±€ä½œç”¨åŸŸä¸‹ï¼Œä½¿ç”¨ `var` å£°æ˜çš„å˜é‡ï¼Œä¼šæŒ‚è½½åˆ° `window` å¯¹è±¡ä¸Šã€‚

```javascript
var a = 1;
console.log(window.a === a); // true
```

ğŸ¯è®°å¿†å£è¯€ï¼šå‡½æ•°ä½œç”¨åŸŸï¼Œå…¨å±€å±æ€§ï¼Œå˜é‡æå‡ï¼Œé‡å¤å£°æ˜ã€‚

# let

`let` ä¹Ÿå¯ä»¥å£°æ˜å˜é‡ï¼Œä½†å’Œ `var` æ“ä½œç¬¦æœ‰å¾ˆå¤§çš„åŒºåˆ«ã€‚

## 1. å—çº§ä½œç”¨åŸŸ

ä»¥ä¸‹ä»£ç ä¼šæŠ¥é”™ï¼Œå› ä¸º`let`å£°æ˜çš„ä½œç”¨åŸŸï¼Œå…·æœ‰**å—çº§ä½œç”¨åŸŸ**ï¼Œå³è¢«`{}`åŒ…è£¹çš„éƒ¨åˆ†ã€‚

```javascript
if (true) {
    let a = 10;
}
console.log(a); // a is not defined
```

## 2. ä¸å¯é‡å¤å£°æ˜

ä»¥ä¸‹ä»£ç ï¼Œæ‰§è¡Œåˆ°`let a = 2`å°±ä¼šæŠ¥é”™ï¼Œå› ä¸ºå˜é‡`a`åœ¨å½“å‰å—çº§ä½œç”¨åŸŸä¸­å·²ç»è¢«å£°æ˜è¿‡äº†ï¼Œä¸èƒ½é‡å¤å£°æ˜ã€‚

```javascript
if (true) {
    let a = 1;
    let a = 2; // SyntaxError: Identifier 'a' has already been declared
    let a = 3;
}
```

å¦å¤–ï¼Œå¦‚æœæ··ç”¨ `var` å’Œ `let` å£°æ˜å˜é‡ï¼Œä¹Ÿæ˜¯ä¸å…è®¸çš„ï¼Œä¸‹é¢çš„ä»£ç éƒ½ä¼šæŠ¥é”™ï¼š

```javascript
let a;
var a; // æŠ¥é”™

// åè¿‡æ¥ä¹Ÿä¸è¡Œ
var a;
let a; // æŠ¥é”™
```

## 2. ä¸å­˜åœ¨å˜é‡æå‡ï¼ˆæš‚æ—¶æ€§é”åŒºï¼‰

ä½¿ç”¨`let`å£°æ˜çš„å˜é‡ï¼Œä¸èƒ½åœ¨å£°æ˜ä¹‹å‰è®¿é—®å®ƒã€‚

```javascript
if (true) {
    console.log(a); // ReferenceError: Cannot access 'a' before initialization
    let a = 1;
}
```

å®é™…ä¸Šï¼ŒJavaScript ä¹Ÿä¼šæ³¨æ„å‡ºç°åœ¨å—åé¢çš„ `let` å£°æ˜ï¼Œåªä¸è¿‡åœ¨æ­¤ä¹‹å‰**ä¸èƒ½ä»¥ä»»ä½•æ–¹å¼æ¥å¼•ç”¨æœªå£°æ˜çš„å˜é‡**ã€‚åœ¨`let`å£°æ˜ä¹‹å‰çš„æ‰§è¡Œç¬é—´è¢«ç§°ä¸º**æš‚æ—¶æ€§æ­»åŒº**ã€‚

## 3. å…¨å±€å˜é‡ä¸ä¼šæŒ‚è½½åˆ° window

å’Œ`var`ä¸åŒï¼Œå³ä½¿åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹ï¼Œä½¿ç”¨`let`å£°æ˜çš„å˜é‡ä¹Ÿä¸ä¼šæŒ‚è½½åˆ°`window`å¯¹è±¡ã€‚

```javascript
var a = 1;
let b = 2;
console.log(window.a === a); // true
console.log(window.b === b); // false
```

## 4. ä¸åŒçš„ä½œç”¨åŸŸäº’ä¸å½±å“

```javascript
function func() {
  let a = 'hello';
  if (true) {
    let a = 'world';
    console.log(a);
  }
  console.log(a);
}

func();
//world
//hello
```
## 5. å˜é‡çš„ç±»å‹

JavaScript ä¸­çš„å˜é‡æ˜¯æ¾æ•£ç±»å‹çš„ï¼Œå¯ä»¥ä¿å­˜ä»»ä½•ç±»å‹æ•°æ®ï¼Œå˜é‡åªä¸è¿‡æ˜¯ä¸€ä¸ªåç§°ã€‚

```js
let a = 1;
a = "hello";
a = [1, 2, 3];
a = {age: 32};
```
# const

`const ` çš„ç‰¹ç‚¹ä¸ `let` åŸºæœ¬ä¸€è‡´ï¼Œ`const` å˜é‡åªèƒ½åœ¨å£°æ˜çš„æ—¶å€™èµ‹å€¼ï¼Œåé¢ä¸èƒ½å†è¢«èµ‹å€¼ã€‚

## 1. å£°æ˜å˜é‡æ—¶å¿…é¡»åŒæ—¶åˆå§‹åŒ–

ä»¥ä¸‹å£°æ˜æŠ¥é”™ï¼Œå› ä¸ºå£°æ˜çš„åŒæ—¶æ²¡æœ‰åˆå§‹åŒ–å˜é‡ã€‚

```javascript
const a; // é”™è¯¯ï¼Œå¿…é¡»èµ‹å€¼
const b = 1;
b=2;  // é”™è¯¯ï¼Œä¸èƒ½è¢«èµ‹å€¼
```

## 2. const ä¿®é¥°çš„å˜é‡å…·æœ‰å†…éƒ¨å¯å˜æ€§

ä½¿ç”¨ `const` å®šä¹‰äº†ä¸€ä¸ªå˜é‡åï¼Œä¸èƒ½å†æ›´æ”¹å®ƒçš„å€¼ï¼š

```javascript
const a = 1;
a = 2; // TypeError: Assignment to constant variable
```

è¿™é‡Œæœ‰ä¸€ä¸ªè¯¯åŒºï¼Œå®é™…ä¸Šï¼Œä½¿ç”¨ `const` å£°æ˜çš„å˜é‡ï¼Œä¸èƒ½ä¿®æ”¹çš„æ˜¯**å†…å­˜åœ°å€**ï¼ï¼

å…·ä½“è§„åˆ™å¦‚ä¸‹ï¼š

- å½“ `const` å®šä¹‰çš„å¸¸é‡ä¸º**åŸºæœ¬æ•°æ®ç±»å‹**æ—¶ï¼Œ**ä¸èƒ½è¢«ä¿®æ”¹**ã€‚
- å½“ `const` å®šä¹‰çš„å¸¸é‡ä¸º**å¼•ç”¨æ•°æ®ç±»å‹**æ—¶ï¼Œå¯ä»¥é€šè¿‡å…¶å±æ€§è¿›è¡Œ**æ•°æ®ä¿®æ”¹**ã€‚

**åŸºæœ¬æ•°æ®ç±»å‹**çš„å€¼å°±ä¿å­˜åœ¨**å†…å­˜åœ°å€**ä¸­ï¼Œæ‰€ä»¥ `const` å®šä¹‰çš„**åŸºç¡€æ•°æ®ç±»å‹**ä¸å¯è¢«æ”¹å˜ã€‚ è€Œ**å¼•ç”¨æ•°æ®ç±»å‹**æŒ‡å‘çš„**å†…å­˜åœ°å€**åªæ˜¯ä¸€ä¸ª**æŒ‡é’ˆ**ï¼Œé€šè¿‡æŒ‡é’ˆæ¥æŒ‡å‘å®é™…æ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ**ä¸å¯è¢«æ”¹å˜çš„æ˜¯æŒ‡é’ˆ**ï¼Œ**è€Œä¸æ˜¯æ•°æ®**ï¼Œæ‰€ä»¥`const`å®šä¹‰çš„**å¼•ç”¨æ•°æ®ç±»å‹**çš„å¸¸é‡å¯ä»¥é€šè¿‡å±æ€§æ¥ä¿®æ”¹å…¶æ•°æ®ã€‚

ä¾‹å¦‚ï¼Œä½¿ç”¨ `const` å®šä¹‰äº†ä¸€ä¸ªæ•°ç»„ï¼Œè™½ç„¶ä¸èƒ½æ›´æ”¹**æ•°æ®ç±»å‹**ï¼Œä½†å¯ä»¥é€šè¿‡ `push` ç­‰æ–¹æ³•ï¼Œä¿®æ”¹è¿™ä¸ªæ•°ç»„ä¸­çš„æ•°æ®ã€‚

```javascript
const arr = [];
arr.push(1, 2, 3);
console.log(arr); // [ 1, 2, 3 ]
```

## æ€»ç»“åŠæœ€ä½³å®è·µ

| **åŒºåˆ«**           | **var** | **let** | **const** |
| ------------------ | ------- | ------- | --------- |
| æ˜¯å¦æœ‰å—çº§ä½œç”¨åŸŸ   | Ã—       | âœ”ï¸       | âœ”ï¸         |
| æ˜¯å¦å­˜åœ¨å˜é‡æå‡   | âœ”ï¸       | Ã—       | Ã—         |
| æ˜¯å¦æ·»åŠ å…¨å±€å±æ€§   | âœ”ï¸       | Ã—       | Ã—         |
| èƒ½å¦é‡å¤å£°æ˜å˜é‡   | âœ”ï¸       | Ã—       | Ã—         |
| æ˜¯å¦å­˜åœ¨æš‚æ—¶æ€§æ­»åŒº | Ã—       | âœ”ï¸       | âœ”ï¸         |
| æ˜¯å¦å¿…é¡»è®¾ç½®åˆå§‹å€¼ | Ã—       | Ã—       | âœ”ï¸         |
| èƒ½å¦æ”¹å˜æŒ‡é’ˆæŒ‡å‘   | âœ”ï¸       | âœ”ï¸       | Ã—         |

é€šå¸¸ï¼Œå†™ JavaScript ä»£ç æ—¶ï¼Œéµå¾ªä»¥ä¸‹åŸåˆ™ï¼š

1ï¼‰å…ˆå£°æ˜ï¼Œåä½¿ç”¨

2ï¼‰ä¼˜å…ˆä½¿ç”¨ï¼š`const > let > var`



ğŸ’¯ã€é¢è¯•é¢˜ã€‘ä»¥ä¸‹ä»£ç è¿è¡Œåä¼šæ‰“å°ä»€ä¹ˆï¼Ÿ

```javascript
for (var i = 1; i <= 5; i++) {
    setTimeout(function () {
        console.log(i);
    }, 0);
}
```

**ç­”æ¡ˆ**ï¼šæ‰“å°çš„éƒ½æ˜¯ 6

è™½ç„¶æ¯ä¸ª`for`å¾ªç¯ä¸­å®šæ—¶å™¨è®¾ç½®çš„æ—¶é—´éƒ½æ˜¯`0`ï¼Œä½†ç”±äº JavaScript æ˜¯å•çº¿ç¨‹ `eventLoop`æœºåˆ¶ï¼Œ`setTimeout`æ˜¯å¼‚æ­¥ä»»åŠ¡ï¼Œé‡åˆ°`setTimeout`å‡½æ•°æ—¶ï¼ŒJavaScript ä¼šå°†å…¶æ”¾å…¥**ä»»åŠ¡é˜Ÿåˆ—**ä¸­ï¼Œå¾…åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œæ‰æ‰§è¡Œ**ä»»åŠ¡é˜Ÿåˆ—**ä¸­çš„**å¼‚æ­¥ä»»åŠ¡**ã€‚

åˆå› ä¸º`setTimeout`å‡½æ•°ä¹Ÿæ˜¯ä¸€ç§**é—­åŒ…**ï¼Œå¾€ä¸Šæ‰¾å®ƒçš„**çˆ¶çº§ä½œç”¨åŸŸé“¾**æ˜¯`window`ï¼Œè€Œå˜é‡`i`æ˜¯ç”¨`var`å£°æ˜çš„ï¼Œæ˜¯`window`ä¸Šçš„**å…¨å±€å˜é‡**ï¼Œæ‰€ä»¥æ­¤æ—¶å˜é‡`i`çš„å€¼å·²ç»å˜æˆ`i = 6`äº†ï¼Œæœ€åæ‰§è¡Œ`setTimeout`æ—¶ï¼Œå½“ç„¶ä¼šè¾“å‡º 5 ä¸ª`6`äº†ï¼

**ä½¿ç”¨`let`è§£å†³**ï¼š

åˆ©ç”¨ JavaScript çš„**å—çº§ä½œç”¨åŸŸ**ï¼Œå°±ä¸ç”¨è¿™ä¹ˆéº»çƒ¦äº†ã€‚å¦‚æœ`for`å¾ªç¯ä½¿ç”¨**å—çº§ä½œç”¨åŸŸ**å˜é‡å…³é”®å­—ï¼Œå¾ªç¯å°±ä¼šä¸ºæ¯ä¸ªå¾ªç¯åˆ›å»º**ç‹¬ç«‹çš„å˜é‡**ï¼Œä»è€Œæ¯æ¬¡æ‰“å°éƒ½ä¼šæœ‰æ­£ç¡®çš„ç´¢å¼•å€¼ã€‚

```javascript
for (let i = 1; i <= 5; i++) {
    setTimeout(function () {
        console.log(i);
    }, 0);
}
```

# å‚è€ƒæ–‡ç« 

- ç«æ˜Ÿé£é¸Ÿ. [JavaScript å˜é‡å£°æ˜varã€letã€constè¯¦è§£](https://juejin.cn/post/7026163740806479902). ç¨€åœŸæ˜é‡‘. 2021å¹´11æœˆ03æ—¥
- CUGGZ. [ã€Œ2021ã€é«˜é¢‘å‰ç«¯é¢è¯•é¢˜æ±‡æ€»ä¹‹JavaScriptç¯‡ï¼ˆä¸Šï¼‰](https://juejin.cn/post/6940945178899251230#heading-23). ç¨€åœŸæ˜é‡‘. 2021å¹´03æœˆ18æ—¥